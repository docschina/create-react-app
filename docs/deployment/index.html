<!DOCTYPE html>
<html lang="en" data-theme="">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<script type="text/javascript">/*<![CDATA[*/window.__chunkMapping={"main":["/main.c96838aeda9906bbe2c3.css","/main.537c044a7c24b15c58aa.js"],"component---site-src-pages-index-jsc-4-f-f99":["/component---site-src-pages-index-jsc-4-f-f99.eefa51f400e5c0b5a52f.css","/component---site-src-pages-index-jsc-4-f-f99.74b344457baee5aed19b.js"],"component---theme-doc-page-1-be-9be":["/component---theme-doc-page-1-be-9be.ac9351e3fa30b156a630.css","/component---theme-doc-page-1-be-9be.ff51142faa7213238523.js"],"docsMetadata---docs-1-da-721":["/docsMetadata---docs-1-da-721.1d2fee2300180b415801.js"],"component---theme-doc-item-178-a40":["/component---theme-doc-item-178-a40.de2648345892298aff25.css","/component---theme-doc-item-178-a40.39ecd5d8386c94a502af.js"],"content---docs-adding-a-css-modules-stylesheet-692-c8f":["/content---docs-adding-a-css-modules-stylesheet-692-c8f.e417fd6aa1d643be53d6.js"],"metadata---docs-adding-a-css-modules-stylesheet-634-576":["/metadata---docs-adding-a-css-modules-stylesheet-634-576.73cbdaa3046740664740.js"],"content---docs-adding-a-sass-stylesheet-993-977":["/content---docs-adding-a-sass-stylesheet-993-977.64485ea9a9c7fbbed71d.js"],"metadata---docs-adding-a-sass-stylesheetbee-f78":["/metadata---docs-adding-a-sass-stylesheetbee-f78.08311e1f69b05891abc0.js"],"content---docs-adding-a-router-34-e-607":["/content---docs-adding-a-router-34-e-607.ddd6299b683e3a996c2e.js"],"metadata---docs-adding-a-router-73-d-177":["/metadata---docs-adding-a-router-73-d-177.34b40ffe55a26ffd6aa4.js"],"content---docs-adding-a-stylesheetf-87-dcf":["/content---docs-adding-a-stylesheetf-87-dcf.1ba7b16d1b75c39ac410.js"],"metadata---docs-adding-a-stylesheet-86-a-a0e":["/metadata---docs-adding-a-stylesheet-86-a-a0e.4114fc5933ba28f3de07.js"],"content---docs-adding-bootstrap-903-029":["/content---docs-adding-bootstrap-903-029.f6b213921cfa398aab1a.js"],"metadata---docs-adding-bootstrapc-3-e-5cc":["/metadata---docs-adding-bootstrapc-3-e-5cc.1d1183600c9620f4d769.js"],"content---docs-adding-css-resetb-9-a-f67":["/content---docs-adding-css-resetb-9-a-f67.2ea84bc31efbbef13f86.js"],"metadata---docs-adding-css-reset-48-e-68b":["/metadata---docs-adding-css-reset-48-e-68b.4f21c493b87e9b701b18.js"],"content---docs-adding-custom-environment-variables-2-cc-a37":["/content---docs-adding-custom-environment-variables-2-cc-a37.9fd662d36dda4a0378bb.js"],"metadata---docs-adding-custom-environment-variablesd-4-a-ad5":["/metadata---docs-adding-custom-environment-variablesd-4-a-ad5.8154c825091bb0e6fabc.js"],"content---docs-adding-flowd-5-c-bec":["/content---docs-adding-flowd-5-c-bec.543146af08819ae0816b.js"],"metadata---docs-adding-flowd-11-a30":["/metadata---docs-adding-flowd-11-a30.3a5b9cb6e85d5ad1f5de.js"],"content---docs-adding-images-fonts-and-fileseb-0-ffd":["/content---docs-adding-images-fonts-and-fileseb-0-ffd.0763fcd5950faac6d951.js"],"metadata---docs-adding-images-fonts-and-files-16-e-f47":["/metadata---docs-adding-images-fonts-and-files-16-e-f47.22054bdd0da2cb55cb88.js"],"content---docs-adding-relaye-8-b-a72":["/content---docs-adding-relaye-8-b-a72.8331ddeee0841f03abf9.js"],"metadata---docs-adding-relaya-55-41b":["/metadata---docs-adding-relaya-55-41b.2a0d0179db4b9fc72ba0.js"],"content---docs-adding-typescript-761-14a":["/content---docs-adding-typescript-761-14a.30e06acec96867280429.js"],"metadata---docs-adding-typescript-414-964":["/metadata---docs-adding-typescript-414-964.0f7f246995b7c7eaa553.js"],"content---docs-advanced-configuration-0-a-8-6b9":["/content---docs-advanced-configuration-0-a-8-6b9.908ac63c1e77c540a6fb.js"],"metadata---docs-advanced-configurationdbb-607":["/metadata---docs-advanced-configurationdbb-607.fcc28d0f9ae967a19072.js"],"content---docs-alternatives-to-ejectingfe-6-478":["/content---docs-alternatives-to-ejectingfe-6-478.a84c7135561b2b2f28f7.js"],"metadata---docs-alternatives-to-ejectingdd-0-051":["/metadata---docs-alternatives-to-ejectingdd-0-051.d1d430ea9790cb211eb9.js"],"content---docs-analyzing-the-bundle-sizeb-33-843":["/content---docs-analyzing-the-bundle-sizeb-33-843.0875e424ee1628934fab.js"],"metadata---docs-analyzing-the-bundle-sizeacc-347":["/metadata---docs-analyzing-the-bundle-sizeacc-347.aff218fdfcfb6fca628d.js"],"content---docs-available-scripts-652-9b8":["/content---docs-available-scripts-652-9b8.7c30a718254104813d6b.js"],"metadata---docs-available-scriptsc-17-7e7":["/metadata---docs-available-scriptsc-17-7e7.b6883eb063cc4cee342a.js"],"content---docs-can-i-use-decoratorse-54-cef":["/content---docs-can-i-use-decoratorse-54-cef.b8821b03801ff2f6c5bb.js"],"metadata---docs-can-i-use-decorators-0-fa-fc5":["/metadata---docs-can-i-use-decorators-0-fa-fc5.699693e9ee0b3ef9dac9.js"],"content---docs-code-splittingeae-502":["/content---docs-code-splittingeae-502.dd72ca246220107301b6.js"],"metadata---docs-code-splitting-029-270":["/metadata---docs-code-splitting-029-270.a699adc754ecd27078f6.js"],"content---docs-debugging-tests-530-53a":["/content---docs-debugging-tests-530-53a.d966f946724a71be36e8.js"],"metadata---docs-debugging-tests-064-ee5":["/metadata---docs-debugging-tests-064-ee5.070ff238d2a3a274f4e9.js"],"content---docs-deploymente-33-fd8":["/content---docs-deploymente-33-fd8.617192390f0b2eef90ac.js"],"metadata---docs-deploymentfe-3-d7f":["/metadata---docs-deploymentfe-3-d7f.595aaaae41f86e9ca0fc.js"],"content---docs-developing-components-in-isolationd-43-423":["/content---docs-developing-components-in-isolationd-43-423.13a312f4f477e67221ac.js"],"metadata---docs-developing-components-in-isolationbdd-26e":["/metadata---docs-developing-components-in-isolationbdd-26e.36863883a29617f80bdb.js"],"content---docs-documentation-intro-8-f-1-b0b":["/content---docs-documentation-intro-8-f-1-b0b.8311024ea9a4fcf57c3d.js"],"metadata---docs-documentation-introf-00-92f":["/metadata---docs-documentation-introf-00-92f.e000961354114e49f657.js"],"content---docs-fetching-data-with-ajax-requests-14-d-242":["/content---docs-fetching-data-with-ajax-requests-14-d-242.d99c29f1fb362ef61ffd.js"],"metadata---docs-fetching-data-with-ajax-requestse-91-a04":["/metadata---docs-fetching-data-with-ajax-requestse-91-a04.ed88ffdee55050ec3fef.js"],"content---docs-folder-structuree-9-c-afa":["/content---docs-folder-structuree-9-c-afa.0e6472f92698c5362895.js"],"metadata---docs-folder-structure-92-f-29d":["/metadata---docs-folder-structure-92-f-29d.5416f78b8eac3c3f9501.js"],"content---docs-getting-started-8-d-0-4ab":["/content---docs-getting-started-8-d-0-4ab.12ce8d82289cb4200821.js"],"metadata---docs-getting-started-57-d-ca5":["/metadata---docs-getting-started-57-d-ca5.723ea93eb542cd3bedb4.js"],"content---docs-importing-a-componentea-3-096":["/content---docs-importing-a-componentea-3-096.94442ae99807b5f22b70.js"],"metadata---docs-importing-a-componente-80-708":["/metadata---docs-importing-a-componente-80-708.6601317fda5da9acd5d5.js"],"content---docs-installing-a-dependency-235-a29":["/content---docs-installing-a-dependency-235-a29.1c37b1e6fd96966f433e.js"],"metadata---docs-installing-a-dependencyf-94-06a":["/metadata---docs-installing-a-dependencyf-94-06a.7ab606451da02cd31056.js"],"content---docs-integrating-with-an-api-backendbd-4-3c4":["/content---docs-integrating-with-an-api-backendbd-4-3c4.8718a13484fdf7ad6854.js"],"metadata---docs-integrating-with-an-api-backend-0-b-7-74e":["/metadata---docs-integrating-with-an-api-backend-0-b-7-74e.6a07ef12e72c0a9530a4.js"],"content---docs-loading-graphql-filesaa-9-117":["/content---docs-loading-graphql-filesaa-9-117.e7a8950fbf60d8fddb44.js"],"metadata---docs-loading-graphql-filesd-85-24d":["/metadata---docs-loading-graphql-filesd-85-24d.f00cfc60bf0997765670.js"],"content---docs-making-a-progressive-web-appb-0-e-aca":["/content---docs-making-a-progressive-web-appb-0-e-aca.3d737da1676518ba9db1.js"],"metadata---docs-making-a-progressive-web-app-26-b-766":["/metadata---docs-making-a-progressive-web-app-26-b-766.b4d767b764e4fa9b71ea.js"],"content---docs-post-processing-csscdf-a22":["/content---docs-post-processing-csscdf-a22.f4fb2e15a5ef18832678.js"],"metadata---docs-post-processing-css-5-e-9-417":["/metadata---docs-post-processing-css-5-e-9-417.fbf5ac1402e878b4e057.js"],"content---docs-pre-rendering-into-static-html-files-283-4ad":["/content---docs-pre-rendering-into-static-html-files-283-4ad.5da212a03c789a47975e.js"],"metadata---docs-pre-rendering-into-static-html-filese-87-3cb":["/metadata---docs-pre-rendering-into-static-html-filese-87-3cb.09ea7f5bc804088916d5.js"],"content---docs-production-build-7-b-4-5c2":["/content---docs-production-build-7-b-4-5c2.cd643418993c68b735b0.js"],"metadata---docs-production-buildbd-5-1df":["/metadata---docs-production-buildbd-5-1df.ca805c8f0edfb6d3ced1.js"],"content---docs-proxying-api-requests-in-development-5-f-5-67c":["/content---docs-proxying-api-requests-in-development-5-f-5-67c.971ab01695424d37faf5.js"],"metadata---docs-proxying-api-requests-in-developmentbe-0-b24":["/metadata---docs-proxying-api-requests-in-developmentbe-0-b24.add387dfeef7a7c6a6a8.js"],"content---docs-running-tests-0-d-4-18f":["/content---docs-running-tests-0-d-4-18f.8b50ba8f41442ebe6921.js"],"metadata---docs-running-testsa-6-a-ff8":["/metadata---docs-running-testsa-6-a-ff8.4a2e3195a6bccade2f91.js"],"content---docs-setting-up-your-editor-81-e-516":["/content---docs-setting-up-your-editor-81-e-516.513ec397206fa45b9818.js"],"metadata---docs-setting-up-your-editorbd-0-159":["/metadata---docs-setting-up-your-editorbd-0-159.76d602567ff151018acc.js"],"content---docs-supported-browsers-features-7-fc-c56":["/content---docs-supported-browsers-features-7-fc-c56.de70b82f207d4c500626.js"],"metadata---docs-supported-browsers-features-23-d-801":["/metadata---docs-supported-browsers-features-23-d-801.1e44e3eea5b984efb9a8.js"],"content---docs-title-and-meta-tags-579-6f8":["/content---docs-title-and-meta-tags-579-6f8.4d41dcf7177cae0235dc.js"],"metadata---docs-title-and-meta-tags-7-ef-241":["/metadata---docs-title-and-meta-tags-7-ef-241.fa88ebbe34f0653fea24.js"],"content---docs-troubleshooting-992-211":["/content---docs-troubleshooting-992-211.d7af6015d079d01abd04.js"],"metadata---docs-troubleshootingac-9-9ea":["/metadata---docs-troubleshootingac-9-9ea.9775aa615adb5170cae7.js"],"content---docs-updating-to-new-releases-65-e-670":["/content---docs-updating-to-new-releases-65-e-670.6962384511c80be51bb4.js"],"metadata---docs-updating-to-new-releases-6-b-3-070":["/metadata---docs-updating-to-new-releases-6-b-3-070.b8bb2c3be917ccac7ce0.js"],"content---docs-using-global-variables-469-9fd":["/content---docs-using-global-variables-469-9fd.f2534019dbadb5a91505.js"],"metadata---docs-using-global-variables-553-bbb":["/metadata---docs-using-global-variables-553-bbb.a26f7ee1bfb5bbba1bf5.js"],"content---docs-using-https-in-developmenta-9-c-f34":["/content---docs-using-https-in-developmenta-9-c-f34.de09f0d3d62b65332bbf.js"],"metadata---docs-using-https-in-developmenta-1-a-afd":["/metadata---docs-using-https-in-developmenta-1-a-afd.2c35f461d2d8fbf6ff80.js"],"content---docs-using-the-public-folderd-01-1ab":["/content---docs-using-the-public-folderd-01-1ab.dfa4c55322f81c7f3b9e.js"],"metadata---docs-using-the-public-folder-04-a-87b":["/metadata---docs-using-the-public-folder-04-a-87b.b50cf58b2baba5b1031a.js"]};/*]]>*/</script>

<title data-react-helmet="true">部署</title>

<meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" name="viewport" content="width=device-width"/><meta data-react-helmet="true" property="og:title" content="Create React App · 通过一行命令，构建现代 Web 应用。"/><meta data-react-helmet="true" property="og:image" content="https://create-react-app.dev/img/logo-og.png"/><meta data-react-helmet="true" property="twitter:image" content="https://create-react-app.dev/img/logo-og.png"/><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Create React App · 通过一行命令，构建现代 Web 应用。"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="description" content="`npm run build` 在 `build` 目录下为你的应用创建了生产环境构建版本。设置你喜欢的 HTTP 服务器，以便访问者能够通过 `index.html` 访问你的站点，并向 `/static/js/main.&lt;hash&gt;.js` 这种静态路径进行请求，以获得 `/static/js/main.&lt;hash&gt;.js` 文件内容。有关更多信息，请查阅[生产环境构建](production-build.md)部分。"/><meta data-react-helmet="true" property="og:description" content="`npm run build` 在 `build` 目录下为你的应用创建了生产环境构建版本。设置你喜欢的 HTTP 服务器，以便访问者能够通过 `index.html` 访问你的站点，并向 `/static/js/main.&lt;hash&gt;.js` 这种静态路径进行请求，以获得 `/static/js/main.&lt;hash&gt;.js` 文件内容。有关更多信息，请查阅[生产环境构建](production-build.md)部分。"/><meta data-react-helmet="true" property="og:url" content="https://create-react-app.dev/docs/deployment"/>

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon/favicon.ico"/>


<link rel="stylesheet" type="text/css" href="/main.c96838aeda9906bbe2c3.css" />

<link rel="stylesheet" type="text/css" href="/0.70dd370b15fde7e2ec84.css" />

<link rel="stylesheet" type="text/css" href="/1.2c9c4d4553a0d4cb7160.css" />

<link rel="stylesheet" type="text/css" href="/component---theme-doc-page-1-be-9be.ac9351e3fa30b156a630.css" />

<link rel="stylesheet" type="text/css" href="/component---theme-doc-item-178-a40.de2648345892298aff25.css" />

</head>
<body >
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Create React App Logo"/><strong class="">Create React App</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" label="文档" position="right" href="/docs/getting-started">文档</a><a class="navbar__item navbar__link" href="https://reactjs.org/community/support.html" label="帮助" position="right" target="_blank" rel="noopener noreferrer">帮助</a><a class="navbar__item navbar__link" href="https://www.github.com/facebook/create-react-app" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_16vC moon_1N64"></span></div><div class="react-toggle-track-x"><span class="toggle_16vC sun_3CZP"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"/></div><div class="navbar__search"><span role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="search-bar"/></div></div></div><div role="presentation" class="navbar__sidebar__backdrop"></div><div class="navbar__sidebar"><div class="navbar__sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Create React App Logo"/><strong>Create React App</strong></a></div><div class="navbar__sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" label="文档" position="right" href="/docs/getting-started">文档</a></li><li class="menu__list-item"><a class="menu__link" href="https://reactjs.org/community/support.html" label="帮助" position="right" target="_blank" rel="noopener noreferrer">帮助</a></li><li class="menu__list-item"><a class="menu__link" href="https://www.github.com/facebook/create-react-app" label="GitHub" position="right" target="_blank" rel="noopener noreferrer">GitHub</a></li></ul></div></div></div></nav><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">欢迎使用</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/documentation-intro">About Docs</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">快速上手</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">开始</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/folder-structure">文件夹结构</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/available-scripts">可执行脚本</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/supported-browsers-features">浏览器及特性适配</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/updating-to-new-releases">更新至最新版本</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">开发</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/setting-up-your-editor">编辑器初始化</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/developing-components-in-isolation">独立开发组件</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/analyzing-the-bundle-size">分析 bundle 大小</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/using-https-in-development">在开发环境使用 HTTPS</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">样式及资源文件</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/adding-a-stylesheet">添加样式表</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/adding-a-css-modules-stylesheet">Adding CSS Modules</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/adding-a-sass-stylesheet">添加 Sass 样式支持</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/adding-css-reset">添加 CSS Reset 支持</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/post-processing-css">CSS 后处理</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/adding-images-fonts-and-files">添加图片、字体及文件支持</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/loading-graphql-files">加载 .graphql 文件</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/using-the-public-folder">使用 Public 文件夹</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/code-splitting">代码分割</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">构建</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/installing-a-dependency">安装依赖</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/importing-a-component">导入组件</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/using-global-variables">使用全局变量</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/adding-bootstrap">添加 Bootstrap 支持</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/adding-flow">添加 Flow 支持</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/adding-typescript">添加 TypeScript 支持</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/adding-relay">添加 Relay 支持</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/adding-a-router">添加路由</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/adding-custom-environment-variables">环境变量</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/making-a-progressive-web-app">开发 Progressive Web App</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/production-build">生成生产环境构建版本</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">测试</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/running-tests">运行测试</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/debugging-tests">Debugging 测试</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">后端整合</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/proxying-api-requests-in-development">开发环境中进行代理</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/fetching-data-with-ajax-requests">获取数据</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/integrating-with-an-api-backend">集成一个 API</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/title-and-meta-tags">标题 &amp; 元标签</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">部署</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/deployment">部署</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">高级用法</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/can-i-use-decorators">能否使用装饰器?</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/pre-rendering-into-static-html-files">预渲染静态 HTML 文件</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/advanced-configuration">进阶配置</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/alternatives-to-ejecting">Eject 的替代选择</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">支持</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/troubleshooting">疑难解答</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col"><div class="docItemContainer_2cwg"><header><h1 class="docTitle_1vWb">部署</h1></header><article><div class="markdown"><p><code>npm run build</code> 在 <code>build</code> 目录下为你的应用创建了生产环境构建版本。设置你喜欢的 HTTP 服务器，以便访问者能够通过 <code>index.html</code> 访问你的站点，并向 <code>/static/js/main.&lt;hash&gt;.js</code> 这种静态路径进行请求，以获得 <code>/static/js/main.&lt;hash&gt;.js</code> 文件内容。有关更多信息，请查阅<a href="/docs/production-build">生产环境构建</a>部分。</p><h2><a aria-hidden="true" class="anchor" id="静态服务器"></a><a aria-hidden="true" class="hash-link" href="#静态服务器">#</a>静态服务器</h2><p>对于使用<a href="https://nodejs.org/">Node</a>的环境，最简单的解决途径是安装 <a href="https://github.com/zeit/serve">serve</a>，并让其处理剩下的内容：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-sh codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">npm install -g serve</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">serve -s build</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>上面显示的最后一个命令将在 <strong>5000</strong> 端口上为你的静态站点提供服务。与 <a href="https://github.com/zeit/serve">serve</a> 的许多内部设置一样，可以使用 <code>-l</code> 或 <code>--listen</code> 选项来调整端口：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-sh codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">serve -s build -l 4000</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>运行此命令以获取可用选项的完整列表：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-sh codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">serve -h</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h2><a aria-hidden="true" class="anchor" id="其他解决方案"></a><a aria-hidden="true" class="hash-link" href="#其他解决方案">#</a>其他解决方案</h2><p>你不一定需要静态服务器来在生产环境下运行 Create React App 项目，将其集成至已有的服务端应用程序时也能很好的工作。</p><p>这是一个使用<a href="https://nodejs.org/">Node</a>和<a href="https://expressjs.com/">Express</a>的程序示例：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-javascript codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> express </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;express&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> path </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">require</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;path&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> app </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">express</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">use</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">express</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">static</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">join</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;build&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">function</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  res</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">sendFile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">join</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;build&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;index.html&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">app</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">listen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">9000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>服务器软件的选择并不重要。因为 Create React App 完全不依赖于平台，所以并不是一定要使用 Node。</p><p><code>build</code> 文件夹下的静态 assets 是 Create React App 生成的唯一输出。</p><p>但是，这对于使用客户端路由来说还远远不够。阅读下一章节，以了解如何在你的单页面应用中支持像 <code>/todos/42</code> 之类的 URLs。</p><h2><a aria-hidden="true" class="anchor" id="通过客户端路由提供服务"></a><a aria-hidden="true" class="hash-link" href="#通过客户端路由提供服务">#</a>通过客户端路由提供服务</h2><p>如果你使用基于 HTML5 <a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API#Adding_and_modifying_history_entries"><code>pushState</code> history API</a> 构建的路由（例如搭配 <code>browserHistory</code> 的 <a href="https://github.com/ReactTraining/react-router">React Router</a>），许多静态服务器都将报错。如果你混用 React Router 与路径 <code>/todos/42</code>，开发服务器将会正确响应 <code>localhost:3000/todos/42</code>，但是将其部署在 Express 服务器上时则不会正确响应。</p><p>这是因为当我们为 <code>/todos/42</code> 生成新页面时，服务器找不到名为 <code>build/todos/42</code> 的文件。需要修改服务器配置以通过 <code>index.html</code> 响应针对 <code>/todos/42</code> 的请求。例如，我们可以修改上述 Express 实例，为所有未知路径提供 <code>index.html</code>：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-diff codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">app.use(express.static(path.join(__dirname, &#x27;build&#x27;)));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token deleted-sign deleted">-app.get(&#x27;/&#x27;, function (req, res) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted"></span><span class="token inserted-sign inserted">+app.get(&#x27;/*&#x27;, function (req, res) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted"></span><span class="token unchanged">   res.sendFile(path.join(__dirname, &#x27;build&#x27;, &#x27;index.html&#x27;));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token unchanged"> });</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>如果你使用的是 <a href="https://httpd.apache.org/">Apache HTTP 服务器</a>，则需要在 <code>public</code> 文件夹中创建一个 <code>.htaccess</code> 文件，如下所示：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Options -MultiViews</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    RewriteEngine On</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    RewriteCond %{REQUEST_FILENAME} !-f</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    RewriteRule ^ index.html [QSA,L]</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>当你执行 <code>npm run build</code> 时，它会被复制到 <code>build</code> 文件夹。</p><p>如果你使用的是 <a href="https://tomcat.apache.org/">Apache Tomcat</a>，则需要参照<a href="https://stackoverflow.com/a/41249464/4878474">这篇 Stack Overflow 答案</a>。</p><p>现在，所有对 <code>todos/42</code> 的请求在开发和生产环境中都会得到正确的处理。</p><p>在生产环境构建版本中，当你选择<a href="/docs/making-a-progressive-web-app#why-opt-in">开启 PWA</a> 时，<a href="https://developers.google.com/web/fundamentals/primers/service-workers/">service worker</a> 将会自动处理所有导航请求，像 <code>/todos/42</code> 这种就会提供一个 <code>index.html</code> 的缓存拷贝。service worker 导航路由可以进行相关配置，或通过 <a href="/docs/available-scripts#npm-run-eject"><code>eject</code>ing</a> 禁用，然后修改 <code>SWPrecachePlugin</code> <a href="../config/webpack.config.prod.js">配置项</a>中的 <a href="https://github.com/GoogleChrome/sw-precache#navigatefallback-string"><code>navigateFallback</code></a> 和 <a href="https://github.com/GoogleChrome/sw-precache#navigatefallbackwhitelist-arrayregexp"><code>navigateFallbackWhitelist</code></a>。</p><p>当用户将你的应用安装至设备主屏幕时，默认配置将会提供一个 <code>/index.html</code> 快捷方式。对于希望通过 <code>/</code> 来提供应用的客户端路由来说可能会导致失效。在 <a href="public/manifest.json"><code>public/manifest.json</code></a> 上修改 web 应用清单，并修改 <code>start_url</code> 以匹配所需的 URL scheme，例如：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-js codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">&quot;start_url&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;.&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h2><a aria-hidden="true" class="anchor" id="相对路径构建"></a><a aria-hidden="true" class="hash-link" href="#相对路径构建">#</a>相对路径构建</h2><p>默认情况下，Create React App 会生成一个假定你的应用被托管在服务器根目录下的构建。</p><p>要覆盖此设置，请指定 <code>package.json</code> 中的 <code>homepage</code> 项，例如：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-js codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">&quot;homepage&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://mywebsite.com/relativepath&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>这将使 Create React App 正确判断要生成的 HTML 文件中该使用的根路径。</p><p><strong>注意</strong>：如果你使用的是 <code>react-router@^4</code>，则可以在任何 <code>&lt;Router&gt;</code> 上使用 <code>basename</code> 属性生成 <code>&lt;Link&gt;</code></p><p>更多信息请参阅<a href="https://reacttraining.com/react-router/web/api/BrowserRouter/basename-string">此处</a>。</p><p>例如：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-js codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token maybe-class-name">BrowserRouter</span><span class="token plain"> basename</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/calendar&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token maybe-class-name">Link</span><span class="token plain"> to</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/today&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// renders &lt;a href=&quot;/calendar/today&quot;&gt;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h3><a aria-hidden="true" class="anchor" id="对不同路径提供相同的构建"></a><a aria-hidden="true" class="hash-link" href="#对不同路径提供相同的构建">#</a>对不同路径提供相同的构建</h3><blockquote><p>注意：该功能仅支持 <code>react-scripts@0.9.0</code> 及以上版本。</p></blockquote><p>如果你没有调用 HTML5 <code>pushState</code> history API 或根本没有使用客户端路由，则无需指定解析应用的 URL。作为代替，你可以将其放在 <code>package.json</code> 中：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-js codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">&quot;homepage&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;.&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>这将确保所有 asset 路径都是相对于 <code>index.html</code> 的。你可以在不重新构建将应用程序从 <code>http://mywebsite.com</code> 移动到 <code>http://mywebsite.com/relativepath</code>，甚至是 <code>http://mywebsite.com/relative/path</code>。</p><h2><a aria-hidden="true" class="anchor" id="为任意构建环境定制环境变量"></a><a aria-hidden="true" class="hash-link" href="#为任意构建环境定制环境变量">#</a>为任意构建环境定制环境变量</h2><p>你可以通过创建自定义 <code>.env</code> 文件来创建一个定制构建环境，并使用 <a href="https://www.npmjs.com/package/env-cmd">env-cmd</a> 对其进行加载。</p><p>例如，要为 staging 环境创建构建环境：</p><ol><li>创建一个名为 <code>.env.staging</code> 的文件</li><li>像设置其他 <code>.env</code> 文件一样设置环境变量（例如 <code>REACT_APP_API_URL=http://api-staging.example.com</code>）</li><li>安装 <a href="https://www.npmjs.com/package/env-cmd">env-cmd</a><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-sh codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ npm install env-cmd --save</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ # or</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ yarn add env-cmd</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre></li><li>在你的 <code>package.json</code> 中添加一个新脚本，使用新环境进行构建：<pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-json codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;scripts&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;build:staging&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;env-cmd -f .env.staging npm run build&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre></li></ol><p>现在你可以运行 <code>npm run build:staging</code> 以使用 staging 环境配置进行构建。
你可以用相同的方式指定其他环境。</p><p><code>.env.production</code> 中的变量将用作后备选项，因为构建时 <code>NODE_ENV</code> 将始终被设定为 <code>production</code>。</p><h2><a aria-hidden="true" class="anchor" id="aws-amplify"></a><a aria-hidden="true" class="hash-link" href="#aws-amplify">#</a><a href="http://console.amplify.aws">AWS Amplify</a></h2><p>AWS Amplify 控制台通过 serverless backends 为现代 Web 应用（单页应用和静态网站生成器）提供持续性部署与托管。Amplify Console 提供了全球可用的 CDNS，自定义域名设置，功能分支部署以及密码保护。</p><ol><li>从<a href="https://console.aws.amazon.com/amplify/home">这里</a>登入 Amplify 控制台</li><li>连接你的 Create React App 仓库并选择一个分支。如果你在寻找 Create React App + Amplify 的入门选择，请尝试<a href="https://github.com/swaminator/create-react-app-auth-amplify">create-react-app-auth-amplify 入门程序</a>，它演示了如何在 10 分支内使用 Create React App 设置身份验证。</li><li>Amplify Console 自动检测构建设置，点击下一步。</li><li>选择 <em>保存并部署</em>。</li></ol><p>如果构建成功，该应用会被部署并托管至拥有 amplifyapp.com 域名的全局 CDN 上。现在，你可以将更改持续部署至你的前端或后端。持续部署允许开发人员在每次修改代码并提交至 Git 仓库时，将更新自动部署至前端与后端。</p><h2><a aria-hidden="true" class="anchor" id="azure"></a><a aria-hidden="true" class="hash-link" href="#azure">#</a><a href="https://azure.microsoft.com/">Azure</a></h2><p>查阅<a href="https://medium.com/@to_pe/deploying-create-react-app-on-microsoft-azure-c0f6686a4321">这篇博文</a>以了解如何将 React 应用部署至 Microsoft Azure。</p><p>查阅<a href="https://medium.com/@strid/host-create-react-app-on-azure-986bc40d5bf2#.pycfnafbg">这篇博文</a>或<a href="https://github.com/ulrikaugustsson/azure-appservice-static">这个仓库</a>，以了解自动部署至 Azure App Service 的方法。</p><h2><a aria-hidden="true" class="anchor" id="firebase"></a><a aria-hidden="true" class="hash-link" href="#firebase">#</a><a href="https://firebase.google.com/">Firebase</a></h2><p>如果尚未安装 Firebase 命令行工具，请执行 <code>npm install -g firebase-tools</code>。注册一个 <a href="https://console.firebase.google.com/">Firebase 账户</a>并创建一个新项目。运行 <code>firebase login</code> 并使用你先前创建的 Firebase 账户登入。</p><p>随后在项目的根目录下执行 <code>firebase init</code> 命令。你需要选择 <strong>Hosting: Configure and deploy Firebase Hosting sites</strong>，然后选择上一步创建的 Firebase 项目。你需要统一创建的 <code>database.rules.json</code>，选择 <code>build</code> 作为公共目录，并选择 <code>y</code> 以同意 <strong>Configure as a single-page app</strong>。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-sh codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">=== Project Setup</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    First, let&#x27;s associate this project directory with a Firebase project.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    You can create multiple project aliases by running firebase use --add,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    but for now we&#x27;ll set up a default project.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ? What Firebase project do you want to associate as default? Example app (example-app-fd690)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    === Database Setup</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Firebase Realtime Database Rules allow you to define how your data should be</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    structured and when your data can be read from and written to.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ? What file should be used for Database Rules? database.rules.json</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ✔  Database Rules for example-app-fd690 have been downloaded to database.rules.json.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Future modifications to database.rules.json will update Database Rules when you run</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    firebase deploy.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    === Hosting Setup</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Your public directory is the folder (relative to your project directory) that</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    will contain Hosting assets to uploaded with firebase deploy. If you</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    have a build process for your assets, use your build&#x27;s output directory.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ? What do you want to use as your public directory? build</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ? Configure as a single-page app (rewrite all urls to /index.html)? Yes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ✔  Wrote build/index.html</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    i  Writing configuration info to firebase.json...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    i  Writing project information to .firebaserc...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ✔  Firebase initialization complete!</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>重要提示：你需要在 <code>firebase.json</code> 文件中为 <code>service-worker.js</code> 设置正确的 HTTP 缓存报头，否则你无法在第一次以后的部署中看到更改（<a href="https://github.com/facebook/create-react-app/issues/2440">issue #2440</a>）。应该如下所示将其添加到 <code>host</code> 中：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-json codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;hosting&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;headers&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token property">&quot;source&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/service-worker.js&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token property">&quot;headers&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token property">&quot;key&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Cache-Control&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token property">&quot;value&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;no-cache&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>现在，执行 <code>npm run build</code> 创建生产环境版本后，可以通过执行 <code>firebase deploy</code> 来部署它。</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-sh codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">=== Deploying to &#x27;example-app-fd690&#x27;...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    i  deploying database, hosting</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ✔  database: rules ready to deploy.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    i  hosting: preparing build directory for upload...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Uploading: [==============================          ] 75%✔  hosting: build folder uploaded successfully</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ✔  hosting: 8 files uploaded successfully</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    i  starting release process (may take several minutes)...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ✔  Deploy complete!</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Project Console: https://console.firebase.google.com/project/example-app-fd690/overview</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Hosting URL: https://example-app-fd690.firebaseapp.com</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>请查阅 <a href="https://firebase.google.com/docs/hosting">Firebase 托管</a>以了解更多相关信息。</p><h2><a aria-hidden="true" class="anchor" id="github-pages"></a><a aria-hidden="true" class="hash-link" href="#github-pages">#</a><a href="https://pages.github.com/">GitHub Pages</a></h2><blockquote><p>注意：该功能仅支持 <code>react-scripts@0.2.0</code> 及以上版本。</p></blockquote><h3><a aria-hidden="true" class="anchor" id="步骤-1：将-homepage-添加到-packagejson"></a><a aria-hidden="true" class="hash-link" href="#步骤-1：将-homepage-添加到-packagejson">#</a>步骤 1：将 <code>homepage</code> 添加到 <code>package.json</code></h3><p><strong>以下步骤非常重要！</strong><br/></p><p><strong>如果你跳过它，你的应用可能无法被正常部署。</strong></p><p>打开你的 <code>package.json</code> 文件，并为你的项目添加 <code>homepage</code> 字段：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-json codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token property">&quot;homepage&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://myusername.github.io/my-app&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>或 Github user 页面：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-json codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token property">&quot;homepage&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://myusername.github.io&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>或自定义域名页面：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-json codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token property">&quot;homepage&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://mywebsite.com&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>Crete React App 使用 <code>homepage</code> 字段来确定被构建的 HTML 文件的根 URL。</p><h3><a aria-hidden="true" class="anchor" id="步骤-2：安装-gh-pages-并将-deploy-与-scripts-添加至-packagejson-中"></a><a aria-hidden="true" class="hash-link" href="#步骤-2：安装-gh-pages-并将-deploy-与-scripts-添加至-packagejson-中">#</a>步骤 2：安装 <code>gh-pages</code> 并将 <code>deploy</code> 与 <code>scripts</code> 添加至 <code>package.json</code> 中</h3><p>现在，每当你执行 <code>npm run build</code>，你都会看到一个关于如何部署到 GitHub Pages 的备忘单。</p><p>要在 <a href="https://myusername.github.io/my-app">https://myusername.github.io/my-app</a> 上发布，执行：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-sh codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">npm install --save gh-pages</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>或者你可以使用 <code>yarn</code> 代替：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-sh codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">yarn add gh-pages</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>将下列脚本添加到 <code>package.json</code> 中：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-diff codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;scripts&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token inserted-sign inserted">+   &quot;predeploy&quot;: &quot;npm run build&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted">+   &quot;deploy&quot;: &quot;gh-pages -d build&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token inserted-sign inserted"></span><span class="token unchanged">    &quot;start&quot;: &quot;react-scripts start&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token unchanged">    &quot;build&quot;: &quot;react-scripts build&quot;,</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p><code>predeploy</code> 将在 <code>deploy</code> 命令执行前自动运行。</p><p>如果要部署到 Github user 页面，而不是项目页面，则需要添加一个额外修改：</p><ol><li>调整你的 <code>package.json</code> 脚本以将部署推送至 <strong>master</strong>：</li></ol><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-diff codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;scripts&quot;: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token unchanged">    &quot;predeploy&quot;: &quot;npm run build&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token unchanged"></span><span class="token deleted-sign deleted">-   &quot;deploy&quot;: &quot;gh-pages -d build&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token deleted-sign deleted"></span><span class="token inserted-sign inserted">+   &quot;deploy&quot;: &quot;gh-pages -b master -d build&quot;,</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h3><a aria-hidden="true" class="anchor" id="步骤-3：执行-npm-run-deploy-以部署站点"></a><a aria-hidden="true" class="hash-link" href="#步骤-3：执行-npm-run-deploy-以部署站点">#</a>步骤 3：执行 <code>npm run deploy</code> 以部署站点</h3><p>随后执行：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-sh codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">npm run deploy</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h3><a aria-hidden="true" class="anchor" id="步骤-4：对于项目页面，确保你的项目设置中使用-gh-pages"></a><a aria-hidden="true" class="hash-link" href="#步骤-4：对于项目页面，确保你的项目设置中使用-gh-pages">#</a>步骤 4：对于项目页面，确保你的项目设置中使用 <code>gh-pages</code></h3><p>最后，确保将 GitHub 项目设置中的 <strong>Github Pages</strong> 选项设定为使用 <code>gh-pages</code> 分支：</p><img src="https://i.imgur.com/HUjEr9l.png" width="500" alt="gh-pages branch setting"/><h3><a aria-hidden="true" class="anchor" id="步骤-5：配置域名（可选）"></a><a aria-hidden="true" class="hash-link" href="#步骤-5：配置域名（可选）">#</a>步骤 5：配置域名（可选）</h3><p>你可以通过将 <code>CNAME</code> 文件添加至 <code>public/</code> 文件夹中为 GitHub Pages 配置自定义域名。</p><p>你的 CNAME 文件应该如下所示：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mywebsite.com</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h3><a aria-hidden="true" class="anchor" id="有关客户端路由的说明"></a><a aria-hidden="true" class="hash-link" href="#有关客户端路由的说明">#</a>有关客户端路由的说明</h3><p>Github Pages 不支持使用基于 HTML5 <code>pushState</code> history API 的路由（例如，使用 <code>browserHistory</code> 的 React Router）。这是因为当通过类似于 <code>http://user.github.io/todomvc/todos/42</code> 这样的 url 访问新页面时，<code>/todo/42</code> 是前端路由，Github Pages 服务器会返回 404，因为它完全不了解 <code>/todos/42</code> 的相关信息。如果要为托管在 GitHub Pages 上的项目添加路由的话，有以下两种解决方案：</p><p>你可以从调用 HTML5 history API 转至使用哈希路由。如果使用 React Router，可以切换至 <code>hashHistory</code> 来达到这种效果，但是 URL 会变得更长且更复杂（例如, <code>http://user.github.io/todomvc/#/todos/42?_k=yknaj</code>）。阅读此文以<a href="https://reacttraining.com/react-router/web/api/Router">了解更多</a>关于 React Router 中不同历史记录实现的详细说明。
或者，你可以使用黑魔法来告诉 GitHub Pages 如何处理 404，方法是使用自定义的重定向参数以重定向至你的 <code>index.html</code> 页面。在部署项目之前，你需要将带有重定向代码的 <code>404.html</code> 文件添加到 <code>build</code> 文件夹中，且需要在 <code>index.html</code> 中添加处理重定向参数的代码。你可以在<a href="https://github.com/rafrex/spa-github-pages">这篇指南</a>中找到有关此技巧的详细说明。</p><h3><a aria-hidden="true" class="anchor" id="故障排除"></a><a aria-hidden="true" class="hash-link" href="#故障排除">#</a>故障排除</h3><h4><a aria-hidden="true" class="anchor" id="devtty-no-such-a-device-or-address"></a><a aria-hidden="true" class="hash-link" href="#devtty-no-such-a-device-or-address">#</a>&quot;/dev/tty: No such a device or address&quot;</h4><p>如果在部署时看到 <code>/dev/tty: No such a device or address</code> 或与之类似的错误，请尝试以下操作：</p><ol><li>创建一个新的<a href="https://github.com/settings/tokens">个人访问 Token</a></li><li><code>git remote set-url origin https://&lt;user&gt;:&lt;token&gt;@github.com/&lt;user&gt;/&lt;repo&gt;</code> .</li><li>再次执行 <code>npm run deploy</code></li></ol><h4><a aria-hidden="true" class="anchor" id="cannot-read-property-email-of-null"></a><a aria-hidden="true" class="hash-link" href="#cannot-read-property-email-of-null">#</a>&quot;Cannot read property &#x27;email&#x27; of null&quot;</h4><p>如果在部署时看到 <code>Cannot read property &#x27;email&#x27; of null</code>，请尝试以下操作：</p><ol><li><code>git config --global user.name &#x27;&lt;your_name&gt;&#x27;</code></li><li><code>git config --global user.email &#x27;&lt;your_email&gt;&#x27;</code></li><li>再次执行 <code>npm run deploy</code></li></ol><h2><a aria-hidden="true" class="anchor" id="heroku"></a><a aria-hidden="true" class="hash-link" href="#heroku">#</a><a href="https://www.heroku.com/">Heroku</a></h2><p>使用<a href="https://github.com/mars/create-react-app-buildpack">为 Create React App 定制的 Heroku 构建工具</a></p><p>你可以在<a href="https://blog.heroku.com/deploying-react-with-zero-configuration">零配置部署 React</a>中找到说明。</p><h3><a aria-hidden="true" class="anchor" id="解决-heroku-部署错误"></a><a aria-hidden="true" class="hash-link" href="#解决-heroku-部署错误">#</a>解决 Heroku 部署错误</h3><p>有时 <code>npm run build</code> 运行在本地，但是在线上部署至 Heroku 时失败。以下是最常见的情况。</p><h4><a aria-hidden="true" class="anchor" id="module-not-found-error-cannot-resolve-file-or-directory"></a><a aria-hidden="true" class="hash-link" href="#module-not-found-error-cannot-resolve-file-or-directory">#</a>&quot;Module not found: Error: Cannot resolve &#x27;file&#x27; or &#x27;directory&#x27;&quot;</h4><p>如果你得到这样的信息：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">remote: Failed to create a production build. Reason:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">remote: Module not found: Error: Cannot resolve &#x27;file&#x27; or &#x27;directory&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">MyDirectory in /tmp/build_1234/src</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>这意味着你需要确保 <code>import</code> 的文件或目录本身的字母大小写和文件系统或 GitHub 上的字母大小写相匹配。</p><p>这很重要，因为 Linux（Heroku 所使用的操作系统）区分大小写。因此，<code>MyDirectory</code> 和 <code>mydirectory</code> 代表着两个不同的目录，同样的，即使项目在本地构建，大小写的差异也会导致 Heroku 远程服务器上的 <code>import</code> 语句被破坏。</p><h4><a aria-hidden="true" class="anchor" id="could-not-find-a-required-file"></a><a aria-hidden="true" class="hash-link" href="#could-not-find-a-required-file">#</a>&quot;Could not find a required file.&quot;</h4><p>如果你从包中排除或忽略了必要的文件，你将会看到类似这样的错误：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">remote: Could not find a required file.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">remote:   Name: `index.html`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">remote:   Searched in: /tmp/build_a2875fc163b209225122d68916f1d4df/public</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">remote:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">remote: npm ERR! Linux 3.13.0-105-generic</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">remote: npm ERR! argv &quot;/tmp/build_a2875fc163b209225122d68916f1d4df/.heroku/node/bin/node&quot; &quot;/tmp/build_a2875fc163b209225122d68916f1d4df/.heroku/node/bin/npm&quot; &quot;run&quot; &quot;build&quot;</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>在这种情况下，请确保文件大小写正确，且不会在本地 <code>.gitignore</code> 或 <code>~/.gitignore_global</code> 中被忽略。</p><h2><a aria-hidden="true" class="anchor" id="netlify"></a><a aria-hidden="true" class="hash-link" href="#netlify">#</a><a href="https://www.netlify.com/">Netlify</a></h2><p><strong>要手动部署到Netlify的CDN：</strong></p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-sh codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">npm install netlify-cli -g</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">netlify deploy</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>选择“ build”作为部署路径。</p><p><strong>要配置持续部署：</strong></p><p>按照以下步骤执行，以使 Netlify 在你推送到 git 或开启 pull request 时自动构建并部署：</p><ol><li><a href="https://app.netlify.com/signup">开启一个新的 netlify 项目</a></li><li>选择你的 Git 托管服务，然后选择你的仓库</li><li>点击 <code>Build your site</code></li></ol><p><strong>客户端路由支持：</strong></p><p>为了支持  <code>pushState</code>，请确保使用以下重写规则创建 <code>public/_redirects</code> 文件：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/*  /index.html  200</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>在构建项目时，Create React App 将把 <code>public</code> 文件夹内容置入构建输出中。</p><h2><a aria-hidden="true" class="anchor" id="zeit-now"></a><a aria-hidden="true" class="hash-link" href="#zeit-now">#</a><a href="https://zeit.co">ZEIT Now</a></h2><p><a href="https://zeit.co">ZEIT Now</a> 是一个针对网站和 serverless APIs 的云平台，可用于将你的 Create React App 项目部署个人域名（或免费的 <code>.now.sh</code> 后缀 URL）。</p><p>该指南将像你展示快速入门的相关步骤：</p><h3><a aria-hidden="true" class="anchor" id="步骤-1：安装-now-命令行工具"></a><a aria-hidden="true" class="hash-link" href="#步骤-1：安装-now-命令行工具">#</a>步骤 1：安装 Now 命令行工具</h3><p>要使用 <a href="https://www.npmjs.com/package/now">npm</a> 安装命令行工具，请执行以下命令：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-shell codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">npm</span><span class="token plain"> i -g now</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h3><a aria-hidden="true" class="anchor" id="步骤-2：部署"></a><a aria-hidden="true" class="hash-link" href="#步骤-2：部署">#</a>步骤 2：部署</h3><p>你可以通过在项目目录的根路径下执行以下命令来部署应用程序：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-shell codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">now</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p><strong>或者</strong>，你也可以使用他们的 <a href="https://zeit.co/github">GitHub</a> 或 <a href="https://zeit.co/gitlab">GitLab</a> 集成。</p><p>这样就可以了！</p><p>现在将会部署你的站点，同时你将会收到类似以下内容的链接：<a href="https://react.now-examples.now.sh">https://react.now-examples.now.sh</a></p><p>开箱即用，同时你已经自动配置了客户端路由兼容与适当的默认缓存头部。这种行为可以被<a href="https://zeit.co/docs/v2/advanced/routes/">这样覆盖</a>。</p><h2><a aria-hidden="true" class="anchor" id="render"></a><a aria-hidden="true" class="hash-link" href="#render">#</a><a href="https://render.com">Render</a></h2><p>Render 提供免费<a href="https://render.com/docs/static-sites">静态站点</a>托管，该托管具备 SSL，全局 CDM 以及来自 GitHub 的持续自动部署。</p><p> 遵循 <a href="https://render.com/docs/deploy-create-react-app">Create React App 开发指南</a>，短时间内即可完成你的应用部署。</p><p>使用邀请码 <code>cra</code> 进行注册或使用<a href="https://render.com/i/cra">该链接</a>。</p><h2><a aria-hidden="true" class="anchor" id="s3-和-cloudfront"></a><a aria-hidden="true" class="hash-link" href="#s3-和-cloudfront">#</a><a href="https://aws.amazon.com/s3">S3</a> 和 <a href="https://aws.amazon.com/cloudfront/">CloudFront</a></h2><p>有关如何将 React 应用部署至 Amazon Web Service S3 和 CloudFront 的相关信息，请查阅<a href="https://medium.com/@omgwtfmarc/deploying-create-react-app-to-s3-or-cloudfront-48dae4ce0af">这篇博文</a>。如果你要添加自定义域名、HTTPS 和持续部署，请参阅<a href="https://medium.com/dailyjs/a-guide-to-deploying-your-react-app-with-aws-s3-including-https-a-custom-domain-a-cdn-and-58245251f081">这篇博文</a>。</p><h2><a aria-hidden="true" class="anchor" id="surge"></a><a aria-hidden="true" class="hash-link" href="#surge">#</a><a href="https://surge.sh/">Surge</a></h2><p>如果尚未安装 Surge 命令行工具，请执行 <code>npm install -g surge</code>。运行 <code>surge</code> 命令以登入或创建一个新账户。</p><p>当询问有关项目路径的信息时，请确保指定 <code>build</code> 文件夹，像这样：</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-sh codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">project path: /path/to/project/build</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>请注意，为了兼容基于 HTML5 <code>pushState</code> API 的路由，你可能需要在部署到 Surge 前将 build 文件夹中的 <code>index.html</code> 文件重命名为 <code>200.html</code>。这样<a href="https://surge.sh/help/adding-a-200-page-for-client-side-routing">能确保每个 URL 都能回退到该文件</a>。</p><h2><a aria-hidden="true" class="anchor" id="将组件发布至-npm"></a><a aria-hidden="true" class="hash-link" href="#将组件发布至-npm">#</a>将组件发布至 npm</h2><p>Create React App 不提供任何将组件发布至 npm 的内置功能。如果你准备从项目中提取组件，以便其他人可以使用它，我们建议将其移动到项目外部的单个文件夹中，然后使用 <a href="https://github.com/insin/nwb#react-components-and-libraries">nwb</a> 这样的工具进行发布前准备。</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/docschina/create-react-app/edit/master/docusaurus/docs/deployment.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated<!-- --> <!-- -->on<!-- --> <strong>2020-2-6</strong> <!-- -->by <strong>DouglasDong</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/title-and-meta-tags"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« <!-- -->标题与元标签</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/can-i-use-decorators"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">能否使用装饰器?<!-- --> »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#静态服务器" class="contents__link">静态服务器</a></li><li><a href="#其他解决方案" class="contents__link">其他解决方案</a></li><li><a href="#通过客户端路由提供服务" class="contents__link">通过客户端路由提供服务</a></li><li><a href="#相对路径构建" class="contents__link">相对路径构建</a><ul class=""><li><a href="#对不同路径提供相同的构建" class="contents__link">对不同路径提供相同的构建</a></li></ul></li><li><a href="#为任意构建环境定制环境变量" class="contents__link">为任意构建环境定制环境变量</a></li><li><a href="#aws-amplify" class="contents__link">AWS Amplify</a></li><li><a href="#azure" class="contents__link">Azure</a></li><li><a href="#firebase" class="contents__link">Firebase</a></li><li><a href="#github-pages" class="contents__link">GitHub Pages</a><ul class=""><li><a href="#步骤-1：将-homepage-添加到-packagejson" class="contents__link">步骤 1：将 homepage 添加到 package.json</a></li><li><a href="#步骤-2：安装-gh-pages-并将-deploy-与-scripts-添加至-packagejson-中" class="contents__link">步骤 2：安装 gh-pages 并将 deploy 与 scripts 添加至 package.json 中</a></li><li><a href="#步骤-3：执行-npm-run-deploy-以部署站点" class="contents__link">步骤 3：执行 npm run deploy 以部署站点</a></li><li><a href="#步骤-4：对于项目页面，确保你的项目设置中使用-gh-pages" class="contents__link">步骤 4：对于项目页面，确保你的项目设置中使用 gh-pages</a></li><li><a href="#步骤-5：配置域名（可选）" class="contents__link">步骤 5：配置域名（可选）</a></li><li><a href="#有关客户端路由的说明" class="contents__link">有关客户端路由的说明</a></li><li><a href="#故障排除" class="contents__link">故障排除</a></li></ul></li><li><a href="#heroku" class="contents__link">Heroku</a><ul class=""><li><a href="#解决-heroku-部署错误" class="contents__link">解决 Heroku 部署错误</a></li></ul></li><li><a href="#netlify" class="contents__link">Netlify</a></li><li><a href="#zeit-now" class="contents__link">ZEIT Now</a><ul class=""><li><a href="#步骤-1：安装-now-命令行工具" class="contents__link">步骤 1：安装 Now 命令行工具</a></li><li><a href="#步骤-2：部署" class="contents__link">步骤 2：部署</a></li></ul></li><li><a href="#render" class="contents__link">Render</a></li><li><a href="#s3-和-cloudfront" class="contents__link">S3 和 CloudFront</a></li><li><a href="#surge" class="contents__link">Surge</a></li><li><a href="#将组件发布至-npm" class="contents__link">将组件发布至 npm</a></li></ul></div></div></div></div></div></div></main></div>
</div>

<script type="text/javascript" src="/runtime~main.555e5bf7bda7bf7cda72.js"></script>

<script type="text/javascript" src="/main.537c044a7c24b15c58aa.js"></script>

<script type="text/javascript" src="/0.e55f004855b886b44500.js"></script>

<script type="text/javascript" src="/1.fad08ad7ad26180951c4.js"></script>

<script type="text/javascript" src="/component---theme-doc-page-1-be-9be.ff51142faa7213238523.js"></script>

<script type="text/javascript" src="/docsMetadata---docs-1-da-721.1d2fee2300180b415801.js"></script>

<script type="text/javascript" src="/component---theme-doc-item-178-a40.39ecd5d8386c94a502af.js"></script>

<script type="text/javascript" src="/content---docs-deploymente-33-fd8.617192390f0b2eef90ac.js"></script>

<script type="text/javascript" src="/metadata---docs-deploymentfe-3-d7f.595aaaae41f86e9ca0fc.js"></script>

</body>
</html>